{% extends 'base.html' %}
{% load widget_tweaks %}

{% block title %}{{ title }} â€” Inventario{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <div class="mb-6 flex items-center justify-between">
        <h1 class="text-3xl font-bold text-surface-900">{{ title }}</h1>
        <a href="javascript:history.back()" class="text-surface-500 hover:text-surface-800 font-medium transition">
            Cancelar
        </a>
    </div>

    <div class="card p-8 bg-surface-0 shadow-lg animate-slide-up">
        <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            {% if form.non_field_errors %}
            <div class="msg-error">
                {{ form.non_field_errors }}
            </div>
            {% endif %}

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                {% for field in form %}
                <div class="{% if field.name == 'name' or field.name == 'description' %}col-span-full{% endif %}">
                    <label for="{{ field.id_for_label }}" class="block text-sm font-bold text-surface-700 mb-1">
                        {{ field.label }}
                        {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                    </label>

                    {% if field.field.widget.input_type == 'checkbox' %}
                    <div class="flex items-center h-10">
                        {{ field|add_class:"w-5 h-5 text-brand-600 rounded border-surface-300 focus:ring-brand-500 transition cursor-pointer" }}
                        <span class="ml-2 text-sm text-surface-500">{{ field.help_text }}</span>
                    </div>
                    {% elif field.field.widget.input_type == 'file' %}
                    {{ field|add_class:"block w-full text-sm text-surface-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-bold file:bg-brand-50 file:text-brand-700 hover:file:bg-brand-100 transition" }}
                    {% else %}
                    {{ field|add_class:"w-full px-4 py-2.5 rounded-lg border border-surface-300 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 transition-colors text-surface-800 placeholder-surface-400 bg-surface-50 focus:bg-white" }}
                    {% endif %}

                    {% if field.errors %}
                    <p class="mt-1 text-xs text-red-600 font-bold">{{ field.errors.0 }}</p>
                    {% endif %}
                    {% if field.help_text and field.field.widget.input_type != 'checkbox' %}
                    <p class="mt-1 text-xs text-surface-400">{{ field.help_text }}</p>
                    {% endif %}
                </div>
                {% endfor %}
            </div>

            <div class="pt-6 border-t border-surface-100 flex justify-end gap-3">
                <button type="submit" class="btn-primary shadow-lg">
                    ðŸ’¾ Guardar Cambios
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}